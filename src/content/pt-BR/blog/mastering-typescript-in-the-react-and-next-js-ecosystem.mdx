---
title: Dominando TypeScript no Ecossistema React e Next.js
date: 2024-07-24
author: João Henrique Barbosa
description: Aprenda técnicas avançadas e melhores práticas para aproveitar o TypeScript em projetos React e Next.js, com foco no gerenciamento de conteúdo e busca de dados.
---

No mundo em constante evolução do desenvolvimento web, o TypeScript surgiu como uma ferramenta poderosa que traz tipos estáticos para o JavaScript, aumentando a produtividade dos desenvolvedores e a qualidade do código. Quando combinado com React e Next.js, o TypeScript não só melhora a experiência de desenvolvimento, mas também garante uma base de código mais robusta e fácil de manter. Neste post do blog, exploraremos algumas técnicas avançadas e melhores práticas para aproveitar o TypeScript em projetos React e Next.js, focando especificamente em como gerenciar conteúdo e buscar dados com TypeScript.

## Por que TypeScript?

Antes de mergulharmos nos detalhes, vamos discutir brevemente por que o TypeScript é uma virada de jogo:

1. Tipagem Estática: Detecte erros no tempo de compilação em vez de em tempo de execução, o que leva a um código mais confiável.
2. Suporte Aprimorado para IDE: Melhor autocompletar, navegação e capacidades de refatoração.
3. Escalabilidade: Mais fácil de gerenciar e escalar grandes bases de código.

## Configurando um Projeto Next.js com TypeScript

Para começar, crie um novo projeto Next.js com suporte a TypeScript:

```bash
npx create-next-app@latest my-next-app --typescript
cd my-next-app
```

Este comando inicializa um novo projeto Next.js com a configuração do TypeScript já configurada.

## Gerenciando Conteúdo com TypeScript

Em muitas aplicações, o gerenciamento de conteúdo é um aspecto crítico. Seja posts de blog, descrições de produtos ou conteúdo gerado pelo usuário, organizar e buscar esses dados de forma eficiente é essencial. O TypeScript pode ajudar a garantir que as estruturas de dados sejam bem definidas e seguras quanto ao tipo.

### Definindo Tipos de Conteúdo

Primeiro, vamos definir os tipos para nosso conteúdo. Por exemplo, se estivermos construindo um blog, podemos ter um tipo Post:

```typescript
// src/types/content.ts
export interface Post {
  id: string;
  title: string;
  content: string;
  date: string;
  author: string;
}
```

### Buscando Conteúdo

O Next.js oferece um mecanismo poderoso de busca de dados com getStaticProps e getServerSideProps. Vamos ver como podemos usar esses métodos com TypeScript para buscar posts de blog.

#### Static Generation com getStaticProps

```typescript
// src/pages/blog/[id].tsx
import { GetStaticPaths, GetStaticProps } from 'next';
import { Post } from '../../types/content';

interface Props {
  post: Post;
}

const PostPage: React.FC<Props> = ({ post }) => {
  return (
    <div>
      <h1>{post.title}</h1>
      <p>{post.content}</p>
      <p>Published on: {post.date}</p>
      <p>Author: {post.author}</p>
    </div>
  );
};

export const getStaticPaths: GetStaticPaths = async () => {
  // Fetch list of post IDs from your CMS or API
  const res = await fetch('https://api.example.com/posts');
  const posts: Post[] = await res.json();

  const paths = posts.map((post) => ({
    params: { id: post.id },
  }));

  return { paths, fallback: false };
};

export const getStaticProps: GetStaticProps<Props> = async ({ params }) => {
  // Fetch post data based on the ID
  const res = await fetch(`https://api.example.com/posts/${params?.id}`);
  const post: Post = await res.json();

  return { props: { post } };
};

export default PostPage;
```

#### Server-Side Rendering with getServerSideProps

```typescript
// src/pages/blog/[id].tsx
import { GetServerSideProps } from 'next';
import { Post } from '../../types/content';

interface Props {
  post: Post;
}

const PostPage: React.FC<Props> = ({ post }) => {
  return (
    <div>
      <h1>{post.title}</h1>
      <p>{post.content}</p>
      <p>Published on: {post.date}</p>
      <p>Author: {post.author}</p>
    </div>
  );
};

export const getServerSideProps: GetServerSideProps<Props> = async ({ params }) => {
  // Fetch post data based on the ID
  const res = await fetch(`https://api.example.com/posts/${params?.id}`);
  const post: Post = await res.json();

  return { props: { post } };
};

export default PostPage;
```

### Organizando Conteúdo na Pasta content

Para projetos menores ou projetos onde o conteúdo é gerenciado localmente, você pode preferir armazenar o conteúdo na pasta content. Veja como você pode organizar e buscar conteúdo dessa pasta:

1. Crie a Pasta content:

```bash
mkdir content
```

2. Adicione Arquivos de Conteúdo:

Crie arquivos JSON para cada post na pasta content:

```json
// content/post1.json
{
  "id": "post1",
  "title": "First Post",
  "content": "This is the first post.",
  "date": "2023-01-01",
  "author": "John Doe"
}
```

3. Busque Conteúdo da Pasta content:

```typescript
// src/pages/blog/[id].tsx
import { GetStaticPaths, GetStaticProps } from 'next';
import { Post } from '../../types/content';
import fs from 'fs';
import path from 'path';

interface Props {
  post: Post;
}

const PostPage: React.FC<Props> = ({ post }) => {
  return (
    <div>
      <h1>{post.title}</h1>
      <p>{post.content}</p>
      <p>Published on: {post.date}</p>
      <p>Author: {post.author}</p>
    </div>
  );
};

export const getStaticPaths: GetStaticPaths = async () => {
  const contentDir = path.join(process.cwd(), 'content');
  const filenames = fs.readdirSync(contentDir);

  const paths = filenames.map((filename) => ({
    params: { id: filename.replace('.json', '') },
  }));

  return { paths, fallback: false };
};

export const getStaticProps: GetStaticProps<Props> = async ({ params }) => {
  const contentDir = path.join(process.cwd(), 'content');
  const filePath = path.join(contentDir, `${params?.id}.json`);
  const post: Post = JSON.parse(fs.readFileSync(filePath, 'utf8'));

  return { props: { post } };
};

export default PostPage;
```

## Conclusão

O TypeScript, quando combinado com React e Next.js, oferece uma maneira poderosa e segura para gerenciar conteúdo e busca de dados. Ao definir tipos claros e aproveitar os métodos de busca de dados do Next.js, você pode garantir que sua aplicação seja robusta e fácil de manter. Seja buscando conteúdo de uma API ou gerenciando localmente na pasta content, o TypeScript ajuda a detectar erros cedo e manter um alto nível de qualidade do código.

Feliz codificação!